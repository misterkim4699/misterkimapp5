<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard - MISTERKIMAPP</title>
  <link rel="stylesheet" href="dashboard.css" />
</head>

<body>

  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Barre latÃ©rale">
    <div class="profile">
      <img id="profilePhotoPreview" src="images/bestoff2.png" alt="Photo profil Mohamed">
      <h3>MISTERKIMAPP</h3>
      <p>DE L'IDEE AU LIVRE</p>
      <p id="sidebarGoal">ğŸ¯ ECRIVEZ AVEC L'IA ğŸ¯ </p>
    </div>

    <nav class="sidebar-nav">
      <a href="#" class="active" data-nav="dashboard">ğŸ“˜ Tableau de bord</a>
      <!-- Nouveau projet dans la sidebar transformÃ© en bouton pour fonctionner correctement -->
      <button id="openNewProjectBtn" class="btn primary" style="width:100%; margin-top:8px;">âœï¸ Nouveau Projet</button>
      <a href="#">ğŸ“š Templates</a>
      <a href="#">ğŸ¯ Objectifs</a>
    </nav>

    <!-- MODULE 1 : OUTILS DE PROJET -->
    <div class="sidebar-module module-projects">
      <h4>ğŸ› ï¸ OUTILS DE PROJET</h4>
      <div class="module-buttons">
        <button>ğŸ¯ Objectifs</button>
        <button>ğŸ‘¤ Personnages</button>
        <button>ğŸ“ Lieux</button>
        <button>ğŸ•’ Chronologie</button>
        <button>ğŸ“ Notes</button>
        <button>ğŸ’¡ IdÃ©es</button>
        <button>ğŸ“Š Statistiques</button>
      </div>
    </div>

    <!-- MODULE 2 : OUTILS CREATIFS -->
    <div class="sidebar-module module-creative">
      <h4>ğŸ¨ OUTILS CREATIFS</h4>
      <div class="module-buttons">
        <button>ğŸ“ GÃ©nÃ©rateur de Noms</button>
        <button>ğŸ¤ DictÃ©e Vocale</button>
        <button>ğŸ–¼ï¸ De Photos Ã  PoÃ¨me</button>
        <button>ğŸ“š BibliothÃ¨que</button>
      </div>
    </div>

    <!-- MODULE 3 : OUTILS AVANCÃ‰S -->
    <div class="sidebar-module module-advanced">
      <h4>ğŸš€ OUTILS AVANCÃ‰S</h4>
      <div class="module-buttons">
        <button>â±ï¸ Ã‰crivain de Pomodoro</button>
        <button>ğŸ–‹ï¸ Analyse de Style</button>
        <button>ğŸ’¬ Dialogues dâ€™assistants</button>
        <button>ğŸ“„ Exporter PDF/EPUB</button>

        <!-- BOUTON PROFIL -->
        <button id="openProfileBtn2" class="profile-btn blue-btn">
          <img src="./images/moedetoulon.jpg" alt="Profil" class="profile-icon">
          Mon Profil
        </button>

        <!-- BOUTON SE DÃ‰CONNECTER -->
        <button class="btn-logout" id="btnLogout">Se dÃ©connecter</button>
      </div>
    </div>
  </aside>

  <!-- MAIN (header horizontal) -->
  <main class="main" id="main">
    <header class="main-header">
      <div class="header-text">
        <h1>Bonjour, Mohamed</h1>
        <p>PrÃªt Ã  transformer vos idÃ©es en chef-d'Å“uvre ?</p>
        <p id="dailyGoalMessage">âœï¸ Objectif quotidien : <strong id="goalValue">500</strong> mots</p>
      </div>
      <div class="header-img">
        <img src="./images/bestofapp.png" alt="Illustration" />
      </div>
    </header>

    <!-- STATS -->
    <section class="stats">
      <div class="stat-card blue">
        <h3>Projets en cours</h3>
        <h2 id="statProjects">0</h2>
      </div>
      <div class="stat-card orange">
        <h3>Mots Ã©crits</h3>
        <h2 id="statWords">0</h2>
      </div>
      <div class="stat-card green">
        <h3>Objectif du jour</h3>
        <h2 id="statGoal">500</h2>
      </div>
      <div class="stat-card purple">
        <h3>SuccÃ¨s</h3>
        <h2 id="statSuccess">0</h2>
      </div>
    </section>

    <!-- MES PROJETS -->
    <section class="projects">
      <div class="projects-header">
        <h2>Mes projets</h2>
        <button id="newProjectBtn" class="btn primary"> NOUVEAU PROJET </button>
      </div>
      <div class="projects-grid"></div>
    </section>
  </main>

  <!-- RIGHT SIDEBAR PROFIL -->
  <aside id="rightProfileSidebar" class="right-sidebar" aria-hidden="true">
    <div class="right-sidebar-header">
      <h2>Mon Profil</h2>
      <button id="closeRightSidebar" class="btn ghost">âœ–</button>
    </div>

    <div style="text-align:center; margin-bottom:12px;">
      <img id="rightProfilePhoto" src="images/moedetoulon.jpg" alt="Photo profil"
        style="width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid var(--purple);margin-bottom:10px;">
      <input type="file" id="rightProfilePhotoInput" accept="image/*" style="display:block;margin:0 auto;">
    </div>

    <label>Nom complet : <input type="text" id="rightProfileName"></label>
    <label>MÃ©tier : <input type="text" id="rightProfileJob"></label>
    <label>Bio : <textarea id="rightProfileBio"></textarea></label>
    <label>Email : <input type="email" id="rightProfileEmail" readonly style="background:#f1f1f5;"></label>

    <div style="margin-top:12px;">
      <button id="rightSaveProfileBtn" class="btn primary">ğŸ’¾ Enregistrer</button>
    </div>
  </aside>

  <!-- NOUVEAU PROJET MODAL (IMPORTANT : placÃ© ici, en dehors de la sidebar) -->
  <div class="modal-overlay" id="newProjectModal" style="display:none;">
    <form id="projectForm" class="new-project-form">
      <h2>Nouveau Projet</h2>
      <label>
        Titre :
        <input type="text" name="title" placeholder="Nom du projet" required>
      </label>
      <label>
        Description :
        <textarea name="description" placeholder="Description du projet"></textarea>
      </label>
      <div class="modal-actions">
        <button type="submit" class="btn primary" id="saveProjectLocal">CrÃ©er</button>
        <button type="button" class="btn ghost" id="cancelNewProject">Annuler</button>
      </div>
    </form>
  </div>

  <!-- PROFIL MODAL -->
  <div class="modal-overlay" id="profileModal" style="display:none;">
    <div class="profile-modal-content">

      <h2>Mon Profil</h2>

      <div style="display:flex; flex-direction:column; align-items:center; gap:20px; margin-bottom:20px;">
        <img id="profileModalPhoto" src="images/moedetoulon.jpg" alt="Photo profil"
          style="width:150px;height:150px;border-radius:50%;object-fit:cover;border:4px solid var(--purple);">
        <input type="file" id="profilePhotoInput" accept="image/*" style="display:block;">
      </div>

      <div style="display:flex; flex-direction:column; gap:20px; font-size:1.1rem;">
        <label>
          Nom complet :
          <input type="text" id="profileName" placeholder="Nom complet">
        </label>
        <label>
          MÃ©tier :
          <input type="text" id="profileJob" placeholder="Votre mÃ©tier">
        </label>
        <label>
          Bio :
          <textarea id="profileBio" placeholder="Courte description..."></textarea>
        </label>
        <label>
          Email :
          <input type="email" id="profileEmail" readonly style="background:#f1f1f5;">
        </label>
      </div>

      <div class="modal-actions">
        <button id="saveProfileBtn" class="btn primary">ğŸ’¾ Enregistrer</button>
        <button id="closeProfileModal" class="btn ghost">Fermer</button>
      </div>

    </div>
  </div>

  <!-- PROJET ACTIF -->
  <div class="active-project" id="activeProjectModal" style="display:none; max-height:90vh; overflow:auto;">
    <h2>Projet Actif</h2>

    <input id="activeProjectTitle" type="text"
      style="padding:12px; font-size:1.2rem; font-weight:bold; border-radius:12px; border:1px solid #ccc;">

    <div class="active-actions">
      <button class="btn primary" id="saveProject">ğŸ’¾ Enregistrer</button>
      <button class="btn" id="deleteProjectBtn">ğŸ—‘ï¸ Supprimer</button>
      <button class="btn ghost close-project">Fermer</button>
    </div>

    <hr>

    <h3>1ï¸âƒ£ Version originale</h3>
    <textarea id="originalText" placeholder="Votre texte original..."></textarea>

    <h3>2ï¸âƒ£ ReformulÃ© (IA)</h3>
    <textarea id="reformulatedText" placeholder="[IA] Reformulation..."></textarea>
    <button class="btn" id="btnReformulate">Reformuler</button>

    <h3>3ï¸âƒ£ Enrichi (IA)</h3>
    <textarea id="enhancedText" placeholder="[IA] Version enrichie..."></textarea>
    <button class="btn" id="btnEnhance">Enrichir</button>

    <h3>4ï¸âƒ£ Plan du texte</h3>
    <textarea id="planText" placeholder="[IA] Plan automatique..."></textarea>
    <button class="btn" id="btnGeneratePlan">GÃ©nÃ©rer un plan</button>

    <hr>

    <h3>ğŸ¯ Affiner lâ€™idÃ©e</h3>
    <textarea id="ideaOutput" placeholder="[IA] Genre, intrigue, personnages..."></textarea>
    <button class="btn" id="btnRefineIdea">GÃ©nÃ©rer des idÃ©es</button>

    <hr>

    <h3>âœï¸ Assistant dâ€™Ã©criture</h3>
    <textarea id="writingAssistantOutput" placeholder="[IA] Suggestions pour continuer votre histoire..."></textarea>
    <button class="btn" id="btnWritingAssistant">Obtenir des suggestions</button>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <script src="dashboard.js"></script>
</body>

</html>